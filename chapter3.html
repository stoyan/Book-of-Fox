<!doctype html>
<html>
<head>
 <title>Book of Fox</title>
 <meta charset="UTF-8">
 <style>html,body,.title,.bio h3{margin:0;padding:0}body{color:#433f3e;font:16px Helvetica,Arial,sans-serif}a{color:#093f78}a:hover,.footlinks a:hover{color:#83a1ab;text-decoration:none}h1,h2{font-size:32px;letter-spacing:-1px;margin-bottom:66px}h3{font-size:28px}h4{font-size:24px;color:#093f78}h5{font-size:20px;margin:3px 0}code{border:1px solid #83a1ab;padding:0 .2em;background:#eef0f0}pre{padding:10px;background:#eef0f0;width:760px;overflow-y:hidden}img{border:0;max-width:780px}.row{overflow:hidden}.boat{float:left}.ship{float:right}.content{margin-left:auto;margin-right:auto;width:960px}.pad{margin:0 50px 50px}.text{padding-left:22px;border-left:34px #f2f2f2 solid;line-height:24px}.text p{margin-bottom:30px}.chapter-title{background:#093f78;text-transform:uppercase;color:white;font-size:28px;padding:10px 10px 4px 50px;display:inline;margin-right:15px;position:relative}.chapter-title i{font-size:20px;position:relative;top:-2px;left:5px}.caption{font-size:14px}.sidebar{border:1px solid #ddd;padding:10px 20px;background:#f2f2f2}.sidebar p{margin-bottom:0}.header{padding-top:35px;padding-left:10px}.footer{background:#093f78;color:white;padding:20px 50px}.foo{padding-right:80px;font-weight:bold}.bio{width:400px;font-size:12px}.bio h3{color:#433f3e;font-size:16px}.profile{padding-right:20px}.subtitle,.author{color:#aeaeae;font-weight:bold;font-size:19px;padding-left:7px;margin:10px 0}.author{padding-right:165px;text-align:right;text-transform:uppercase;margin:0}.title{color:#093f78;font-size:90px;font-weight:bold;letter-spacing:-4px;text-transform:uppercase;display:block;text-decoration:none}.title img{position:relative;top:7px}a.title:hover{color:#093f78}a:hover img{opacity:.8}.gently{margin:20px 50px 40px}.footlinks{list-style:none;font-size:14px;line-height:18px;font-weight:normal;padding:0;letter-spacing:.3px}.footlinks a,.prevnext a{color:white;text-decoration:none}.toc{list-style:none;padding:0}.nav{text-transform:uppercase;font-weight:bold}.nav li{list-style:none;display:inline}.nav ul{padding:5px 0 0;margin:0}.paging{text-align:center;font-size:22px;width:400px}.paging a{color:#444;text-decoration:none;padding:5px}.paging a:hover,a.current{background:#093f78;padding:5px;color:white}.prevnext{border-radius:7px;background:#093f78;font-size:20px;padding:6px 7px 3px;width:210px;text-align:center}.begone{visibility:hidden}.menu{display:none;position:absolute;z-index:2;width:100%;background:white;border:1px solid #093f78}.menu ul{margin:0;padding:0;list-style:none}.menu a{text-decoration:none;font-size:20px;display:block;padding:10px 20px;white-space:nowrap}.menu a:hover{background:#efefef;color:#093f78}.chapter-title:hover .menu,.menu:hover{display:block}.icon{border:1px solid #ddd;padding:10px}.hl-default{color:Black}.hl-code{color:Gray}.hl-brackets{color:Olive}.hl-comment{color:Orange}.hl-quotes{color:Darkred}.hl-string{color:Red}.hl-identifier{color:Blue}.hl-builtin{color:Teal}.hl-reserved{color:Green}.hl-inlinedoc{color:Blue}.hl-var{color:Darkblue}.hl-url{color:Blue}.hl-special{color:Navy}.hl-number{color:Maroon}.hl-inlinetags{color:Blue}.hl-main{background-color:White}.hl-gutter{background-color:#999;color:White}.hl-table{font-family:courier,monospace;font-size:12px;border:solid 1px lightgray}</style>
</head>
<body>

<div class="content">
  <div class="row pad header">
      <div class="boat">
        <img class="profile"
          src="http://graph.facebook.com/stoyan.stefanov/picture">
      </div>
      <div class="boat bio">
        <h3>Stoyan Stefanov</h3>
        <p>Web developer, author, speaker, 
        Facebook engineer, ex-Yahoo, <br>creator of smush.it, YSlow 2.0 architect
        and guitar virtuoso wannabe</p>
      </div>
      <div class="ship">
        <iframe width="60" height="65"
          src="http://platform.twitter.com/widgets/tweet_button.html?text=Book%20of%20Fox%20http://www.bookoffox.com&amp;url=www.bookoffox.com&amp;count=vertical&amp;via=stoyanstefanov"
          scrolling="no" frameborder="0" style="border:none; overflow:hidden;"
        ></iframe>
      </div>
      <div class="ship">
        <iframe width="55" height="65"
          src="https://www.facebook.com/plugins/like.php?layout=box_count&amp;href=http://www.bookoffox.com"
          scrolling="no" frameborder="0" style="border:none; overflow:hidden; padding-top:3px"
        ></iframe>
      </div>
  </div>

  <div class="gently">
    <p class="subtitle">Getting started with Firefox OS</p>
    <a class="title" href="index.html">Book of Fox</a>
    <p class="author">by Stoyan Stefanov</p>
  </div>

  <h1><div class="chapter-title">Chapter3 <i>&#9660;</i>
    <div class="menu">
      <ul>
      <li><a href="index.html" title="table of contents">TOC</a></li>
      <li><a href="chapter1.html">chapter 1</a></li>
      <li><a href="chapter2.html">chapter 2</a></li>
      <li><a href="chapter3.html">chapter 3</a></li>
      <li><a href="chapter4.html">chapter 4</a></li>

      <li><a href="chapter9.html">chapter 9</a></li>
      <li><a href="chapter10.html">chapter 10</a></li>
      </ul>
    </div>
    </div> Deploying your app</h1>
  <div class="text pad">
    
<div>
  <div class="sect1">
    <div class="sectionbody">
      <div class="paragraph">
        <p>
          Once you have a running app, next steps are:
        </p>
      </div>
      <div class="ulist">
        <ul>
          <li>
            <p>
              experience the app on a real device
            </p>
          </li>
          <li>
            <p>
              spread it around so other can enjoy it too
            </p>
          </li>
        </ul>
      </div>
      <div class="sect2">
        <h3 id="_testing_on_the_device">
          Testing on the device
        </h3>
        <div class="paragraph">
          <p>
            Now that you know how to write and debug an application and also test in the simulator, you're naturally eager to see it running on a real device. Good news: you can do this easily using the R2D2B2G extension. Bad news: there's some setup upfront.
          </p>
        </div>
        <div class="sect3">
          <h4 id="_adb">
            adb
          </h4>
          <div class="paragraph">
            <p>
              You'll need to setup a command-line utility called <code>adb</code> which stands for Android Debug Bridge. You run this utility on your development machine and use it to connect to your phone, to browse the file system and copy (pull, push) files between the computer and the phone.
            </p>
          </div>
          <div class="paragraph">
            <p>
              R2D2B2G comes with a copy of adb so you don't have to install it separately. However you have to setup the phone and the computer to "talk" to each other.
            </p>
          </div>
          <div class="paragraph">
            <p>
              First, enable remote debugging on the phone: go to the <em>Settings</em> app, then select menu <em>Device Information</em> / <em>More Information</em> / <em>Developer</em>. Once there, check the "Remote debugging" option.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Then you need to setup your developer machine. The setup is different depending on your operating system.
            </p>
          </div>
          <div class="paragraph">
            <p>
              If you're on a <em>Mac</em>, the good news is that it just works. On <em>Windows</em> you need to install drivers specific to your computer manufacturer. The details can be found here: <a href="https://developer.android.com/tools/extras/oem-usb.html">https://developer.android.com/tools/extras/oem-usb.html</a>
            </p>
          </div>
          <div class="paragraph">
            <p>
              On <em>Linux</em> you need to create the file:
            </p>
          </div>
          <div class="listingblock">
            <div>
              <pre>
/etc/udev/rules.d/51-android.rules
</pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              In this file add the line:
            </p>
          </div>
          <div class="listingblock">
            <div>
              <pre>
SUBSYSTEM=="usb", ATTR{idVendor}=="05c6", MODE="0666", GROUP="plugdev"
</pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              The id string <code>05c6</code> is specific to the phone you have, so you may need to replace it with the one for your test phone. Here are some IDs you might find useful:
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <code>05c6</code> - Geeksphone device made by Qualcomm
                </p>
              </li>
              <li>
                <p>
                  <code>19d2</code> - ZTE device, the maker of several test devices, e.g. Unagi, Inagi and Otoro
                </p>
              </li>
              <li>
                <p>
                  <code>18d1</code> - Google device
                </p>
              </li>
              <li>
                <p>
                  <code>04e8</code> - Samsung
                </p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              Finally, set the permissions:
            </p>
          </div>
          <div class="listingblock">
            <div>
              <pre>
chmod a+r /etc/udev/rules.d/51-android.rules
</pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              If all goes as planned, when you open the R2D2B2G extension you'll see the new option to push the app to the device.
            </p>
          </div>
          <div class="imageblock" id="2_devicepush">
            <div>
              <img src="images/2_devicepush.png" alt="images/2_devicepush.png" />
            </div>
            <div class="_title">
              Figure 1. New elements in the R2D2B2G UI
            </div>
          </div>
        </div>
        <div class="sect3">
          <h4 id="_standalone_adb">
            Standalone adb
          </h4>
          <div class="paragraph">
            <p>
              It's great that R2D2B2G comes bundled with adb. But if you run into troubles with the setup (and you're not sure if the extension's UI is to blame) or if you want more hands-on development, it will be beneficial to install your own copy of adb.
            </p>
          </div>
          <div class="paragraph">
            <p>
              To do so:
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  Download the "ADT bundle" zip file from <a href="http://developer.android.com/sdk/index.html">http://developer.android.com/sdk/index.html</a> (ADT stands for Android Developer Tools)
                </p>
              </li>
              <li>
                <p>
                  Unzip to a convenient location, e.g. <code>~/Codez/adt</code>
                </p>
              </li>
              <li>
                <p>
                  Add the path to the subdirectory <code>sdk/platform-tools</code> found in ADT to your OS PATH. This is where the adb utility is found and it's good to have it handy.
                </p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              For example, after unzipping the ADT bundle in your <code>~/Downloads</code> folder:
            </p>
          </div>
          <div class="listingblock">
            <div>
              <pre>
$ mv ~/Downloads/adt-bundle-mac-x86_64-20130219 ~/Codez/adt
$ export PATH=~/Codez/adt/sdk/platform-tools:$PATH
</pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              The end result you're looking for is being able to type <code>adb devices</code> from any directory and make sure it "sees" your phone.
            </p>
          </div>
          <div class="listingblock">
            <div>
              <pre>
$ adb devices
List of devices attached
full_unagi device
</pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Then, just for fun, try <code>adb shell</code> and just like that, miraculously, you can browse the files on your phone.
            </p>
          </div>
        </div>
        <div class="sect3">
          <h4 id="_pushing_the_app_to_the_phone">
            Pushing the app to the phone
          </h4>
          <div class="paragraph">
            <p>
              Once the setup is behind you, things can't be any easier. Open the R2D2B2G dashboard and click the "Push" button found next to your app.
            </p>
          </div>
          <div class="imageblock" id="2_pushbutton">
            <div>
              <img src="images/2_pushbutton.png" alt="images/2_pushbutton.png" />
            </div>
            <div class="_title">
              Figure 2. Pushing to the device
            </div>
          </div>
          <div class="paragraph">
            <p>
              The phone will ask you for permission to accept a remote connection. Say OK.
            </p>
          </div>
          <div class="imageblock" id="2_permission">
            <div>
              <img src="images/2_permission.png" alt="images/2_permission.png" width="320px" />
            </div>
            <div class="_title">
              Figure 3. Allow a remote connection
            </div>
          </div>
          <div class="paragraph">
            <p>
              And this is it. You'll see an "Battery installed" message and the app is now available on your phone.
            </p>
          </div>
          <div class="imageblock" id="2_pushed">
            <div>
              <img src="images/2_pushed.png" alt="images/2_pushed.png" />
            </div>
            <div class="_title">
              Figure 4. The app running on the device
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
  </div>
</div>

<div class="content">
  <div class="nav row pad">
    <div class="boat prevnext"><a href="chapter2.html">previous chapter</a></div>
    <div class="paging boat"><div>
      <ul>
      <li><a href="index.html" title="table of contents">TOC</a></li>
      <li><a href="chapter1.html">1</a></li>
      <li><a href="chapter2.html">2</a></li>
      <li><a href="chapter3.html" class="current">3</a></li>
      <li><a href="chapter4.html">4</a></li>

      <li><a href="chapter9.html">9</a></li>
      <li><a href="chapter10.html">10</a></li>
      </ul>
    </div></div>
    <div class="ship prevnext"><a href="chapter4.html">next chapter</a></div>
  </div>
</div>

<div class="footer row">
  <div class="content">
    <div class="boat pad">&nbsp;</div>
    <div class="boat foo">
      <p>About the book</p>
      <ul class="footlinks">
        <li>Public domain license</li>
        <li><a href="https://github.com/stoyan/Book-of-Fox/">Contribute via GitHub</a></li>
        <li><a href="http://phpied.com/book-of-fox">About, history, announcement</a></li>
      </ul>
    </div>
    <div class="boat foo">
      <p>More from Stoyan</p>
      <ul class="footlinks">
        <li><a href="http://www.bookofspeed.com">Book of Speed</a></li>
        <li><a href="http://www.perfplanet.com">Planet "Performance"</a></li>
        <li><a href="http://www.sultansofspeed.com">Sultans of Speed</a></li>
        <li><a href="http://givepngachance.com/">Give PNG a Chance</a></li>
        <li><a href="http://phpied.com">phpied.com blog</a></li>
        <li><a href="http://jspatterns.com">JavaScript patterns blog</a></li>
        <li><a href="http://www.amazon.com/Stoyan-Stefanov/e/B002BLXYIG/">Amazon page</a></li>
      </ul>
    </div>    
  </div>
</div>
</body>
</html>
